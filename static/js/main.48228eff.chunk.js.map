{"version":3,"sources":["firebase/index.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","storage","ReactFirebaseFileUpload","useState","image","setImage","url","setUrl","progress","setProgress","componentDidMount","requestOptions","method","headers","body","JSON","stringify","fetch","then","result","json","resp","console","log","name","value","max","type","onChange","e","target","files","onClick","ref","put","on","snapshot","Math","round","bytesTransferred","totalBytes","error","child","getDownloadURL","src","alt","render","document","querySelector"],"mappings":"8IAgBAA,IAASC,cAbc,CACrBC,OAAQ,0CACRC,WAAY,mCACZC,YAAa,uDACbC,UAAW,mBACXC,cAAe,+BACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBAOjB,IAAMC,EAAUV,IAASU,U,eCbnBC,EAA0B,WAC9B,MAA0BC,mBAAS,MAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAAsBF,mBAAS,IAA/B,mBAAOG,EAAP,KAAYC,EAAZ,KACA,EAAgCJ,mBAAS,GAAzC,mBAAOK,EAAP,KAAiBC,EAAjB,KAuDIC,EAAkB,SAACJ,GAEvB,IAAMK,EAAiB,CACnBC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEV,IAAKA,KAEhCW,MAAM,MAAON,GAERO,MAAK,SAACC,GACAA,EAAOC,OAAOF,MAAK,SAACG,GAClBC,QAAQC,IAAI,OAAOF,EAAKG,MACxBjB,EAAOc,EAAKG,aAUzB,OAHAF,QAAQC,IAAI,UAAWnB,GAIrB,gCACE,0BAAUqB,MAAOjB,EAAUkB,IAAI,QAC/B,uBACA,uBACA,uBAAOC,KAAK,OAAOC,SAhFF,SAAAC,GACfA,EAAEC,OAAOC,MAAM,IACjB1B,EAASwB,EAAEC,OAAOC,MAAM,OA+ExB,wBAAQC,QA3ES,WACA/B,EAAQgC,IAAR,iBAAsB7B,EAAMoB,OAAQU,IAAI9B,GAChD+B,GACT,iBACA,SAAAC,GACE,IAAM5B,EAAW6B,KAAKC,MACnBF,EAASG,iBAAmBH,EAASI,WAAc,KAEtD/B,EAAYD,MAEd,SAAAiC,GACEnB,QAAQC,IAAIkB,MAEd,WACExC,EACGgC,IAAI,UACJS,MAAMtC,EAAMoB,MACZmB,iBACAzB,MAAK,SAAAZ,GACJgB,QAAQC,IAAIjB,GAKZI,EAAkBJ,UAmDxB,oBACA,uBACCA,EACD,uBACA,qBAAKsC,IAAKtC,GAAO,iCAAkCuC,IAAI,uBAK7DC,iBAAO,cAAC,EAAD,IAA6BC,SAASC,cAAc,Y","file":"static/js/main.48228eff.chunk.js","sourcesContent":["import firebase from 'firebase/compat/app';\nimport \"firebase/compat/storage\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDRfYqL0jaayz3mWFoosTVZuuHheuMj0zE\",\n  authDomain: \"accountant-5626f.firebaseapp.com\",\n  databaseURL: \"https://accountant-5626f-default-rtdb.firebaseio.com\",\n  projectId: \"accountant-5626f\",\n  storageBucket: \"accountant-5626f.appspot.com\",\n  messagingSenderId: \"863825509740\",\n  appId: \"1:863825509740:web:232ddb113c1d86f0dc4749\",\n  measurementId: \"G-013SMXJS1H\"\n\n\n};\n\nfirebase.initializeApp(firebaseConfig);\n\nconst storage = firebase.storage();\n\nexport { storage, firebase as default };\n","import React, { useState } from \"react\";\nimport { render } from \"react-dom\";\nimport { storage } from \"./firebase\";\nimport axios from 'axios'\n\nconst ReactFirebaseFileUpload = () => {\n  const [image, setImage] = useState(null);\n  const [url, setUrl] = useState(\"\");\n  const [progress, setProgress] = useState(0);\n\n  const handleChange = e => {\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n    }\n  };\n\n  const handleUpload = () => {\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\n    uploadTask.on(\n      \"state_changed\",\n      snapshot => {\n        const progress = Math.round(\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n        );\n        setProgress(progress);\n      },\n      error => {\n        console.log(error);\n      },\n      () => {\n        storage\n          .ref(\"images\")\n          .child(image.name)\n          .getDownloadURL()\n          .then(url => {\n            console.log(url);\n            \n\n            // setUrl(url);\n            // ApiCall();\n            componentDidMount(url)\n          });\n      }\n    );\n  };\n\n\n//  const ApiCall=()=> {\n//    fetch(\"/fk\",{\n//      method:'POST',\n//      headers:{\n//        'Content-Type':'application/json',\n//        'Accept': 'application/json'\n//      },\n//      body:JSON.stringify({'url':url})\n     \n//    }).then((result)=>{\n//      result.json().then((resp)=>{\n//        console.log(\"resp\",resp)\n//      })\n\n//    })\n\nconst componentDidMount=(url)=> {\n  // Simple POST request with a JSON body using fetch\n  const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ url: url })\n  };\n  fetch('/fk', requestOptions)\n      // .then(response => console.log( response.json()))\n      .then((result)=>{\n             result.json().then((resp)=>{\n               console.log(\"resp\",resp.name)\n               setUrl(resp.name)\n             })\n            })\n}\n\n\n\n  console.log(\"image: \", image);\n\n\n  return (\n    <div>\n      <progress value={progress} max=\"100\" />\n      <br />\n      <br />\n      <input type=\"file\" onChange={handleChange} />\n      <button onClick={handleUpload}>Upload</button>\n      <br />\n      {url}\n      <br />\n      <img src={url || \"http://via.placeholder.com/300\"} alt=\"firebase-image\" />\n    </div>\n  );\n};\n\nrender(<ReactFirebaseFileUpload />, document.querySelector(\"#root\"));\n"],"sourceRoot":""}